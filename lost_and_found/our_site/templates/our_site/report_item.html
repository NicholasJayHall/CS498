{% extends 'our_site/base.html' %}

{% block title %}Report an Item â€“ Campus Lost & Found{% endblock %}

{% block content %}
<div class="page-wrapper">
  <div style="max-width:720px;margin:0 auto;">

    <div class="paper-card pinned" style="margin-top:2rem;">
      <h1 style="font-family:'Special Elite',monospace;font-size:1.8rem;margin-bottom:0.3rem;">ğŸ“‹ Report a Lost / Found Item</h1>
      <p style="color:var(--ink-light);font-style:italic;font-size:0.9rem;margin-bottom:2rem;line-height:1.6;">
        Fill out the form below to post an item to the Lost &amp; Found board. All active subscribers will be notified by email.
      </p>

      {% if not user.is_authenticated %}
        <div class="alert alert-warning">
          âš ï¸ You must <a href="{% url 'login' %}?next={% url 'report_item' %}">log in</a> or
          <a href="{% url 'register' %}">register</a> to report an item.
        </div>
      {% else %}
      <form method="post" enctype="multipart/form-data" novalidate>
        {% csrf_token %}

        <!-- Title -->
        <div class="form-group">
          <label for="{{ form.title.id_for_label }}">ğŸ“Œ Item Title *</label>
          {{ form.title }}
          {% if form.title.errors %}
            {% for err in form.title.errors %}<p class="form-error">{{ err }}</p>{% endfor %}
          {% endif %}
        </div>

        <!-- Two-column row -->
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;">
          <div class="form-group">
            <label for="{{ form.category.id_for_label }}">ğŸ· Category *</label>
            {{ form.category }}
            {% if form.category.errors %}
              {% for err in form.category.errors %}<p class="form-error">{{ err }}</p>{% endfor %}
            {% endif %}
          </div>
          <div class="form-group">
            <label for="{{ form.status.id_for_label }}">ğŸ“Œ Status *</label>
            {{ form.status }}
            {% if form.status.errors %}
              {% for err in form.status.errors %}<p class="form-error">{{ err }}</p>{% endfor %}
            {% endif %}
          </div>
        </div>

        <!-- Location + Date row -->
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;">
          <div class="form-group">
            <label for="{{ form.location.id_for_label }}">ğŸ“ Location *</label>
            {{ form.location }}
            <p class="helptext">{{ form.location.help_text }}</p>
            {% if form.location.errors %}
              {% for err in form.location.errors %}<p class="form-error">{{ err }}</p>{% endfor %}
            {% endif %}
          </div>
          <div class="form-group">
            <label for="{{ form.date_lost.id_for_label }}">ğŸ“… Date *</label>
            {{ form.date_lost }}
            {% if form.date_lost.errors %}
              {% for err in form.date_lost.errors %}<p class="form-error">{{ err }}</p>{% endfor %}
            {% endif %}
          </div>
        </div>

        <!-- Description -->
        <div class="form-group">
          <label for="{{ form.description.id_for_label }}">ğŸ“ Description *</label>
          {{ form.description }}
          {% if form.description.errors %}
            {% for err in form.description.errors %}<p class="form-error">{{ err }}</p>{% endfor %}
          {% endif %}
        </div>

        <!-- Photo -->
        <div class="form-group">
          <label for="{{ form.image.id_for_label }}">ğŸ“· Photo (optional)</label>
          {{ form.image }}
          {% if form.image.errors %}
            {% for err in form.image.errors %}<p class="form-error">{{ err }}</p>{% endfor %}
          {% endif %}
          <div class="img-preview-wrap">
            <img id="img-preview" src="" alt="Preview">
          </div>
        </div>

        <!-- Contact Email -->
        <div class="form-group">
          <label for="{{ form.contact_email.id_for_label }}">âœ‰ï¸ Contact Email *</label>
          {{ form.contact_email }}
          <p class="helptext">{{ form.contact_email.help_text }}</p>
          {% if form.contact_email.errors %}
            {% for err in form.contact_email.errors %}<p class="form-error">{{ err }}</p>{% endfor %}
          {% endif %}
        </div>

        <hr style="border:none;border-top:1px dashed #c3b090;margin:1.5rem 0;">

        <div class="d-flex gap-1 flex-wrap">
          <button type="submit" class="btn btn-primary">ğŸ“‹ Post to Board</button>
          <a href="{% url 'item_list' %}" class="btn btn-secondary">Cancel</a>
        </div>
      </form>
      {% endif %}
    </div>

  </div>
</div>
{% endblock %}
